---
# Nginx exporter target for {{ inventory_hostname }}
# Generated by remote_monitoring role
# Last updated: {{ ansible_date_time.iso8601 }}

- targets: ['{{ ansible_default_ipv4.address }}:{{ nginx_exporter_port }}']
  labels:
    job: remote_nginx_exporter
    instance: '{{ inventory_hostname }}'
    service: 'nginx'
    environment: '{{ remote_monitoring_environment | default("production") }}'
    nginx_version: '{{ nginx_version | default("unknown") }}'
    exporter_version: '{{ nginx_exporter_version | default("latest") }}'
    deployment_type: 'docker'
{% if remote_monitoring_labels is defined %}
{% for key, value in remote_monitoring_labels.items() %}
    {{ key }}: '{{ value }}'
{% endfor %}
{% endif %} 