# vless_to_json.py

## What does this script do?

This script converts VLESS (and similar) proxy URIs into pretty-printed V2Ray-compatible JSON configuration files. It supports decoding and extracting all relevant parameters from the URI, and outputs a ready-to-use config file for V2Ray clients.

## Requirements
- Python 3.6+
- No external dependencies (uses only the Python standard library)

## How to Use

### 1. As a Python Module
You can import and use the conversion functions in your own Python code:

```python
from scripts.vless_to_json import convert_uri_reality_json

uri = 'vless://10468cab-7ce9-4e40-9c89-0cb32167be66@159.69.207.188:40152?type=tcp&security=reality&pbk=I4y_JLu3c_v7AsJcmv_Bm8PSE351QV7wtg7zhcUrXFg&fp=chrome&sni=www.microsoft.com&sid=0bf8d58f&spx=%2F#Main%20VPN-qw9rh9i4'
config_file = convert_uri_reality_json('127.0.0.1', 10809, 10808, uri)
print(f'Generated config file: {config_file}')
```

### 2. From the Terminal
You can run a one-liner to convert a URI:

```bash
python3 -c "from scripts.vless_to_json import convert_uri_reality_json; uri = 'vless://10468cab-7ce9-4e40-9c89-0cb32167be66@159.69.207.188:40152?type=tcp&security=reality&pbk=I4y_JLu3c_v7AsJcmv_Bm8PSE351QV7wtg7zhcUrXFg&fp=chrome&sni=www.microsoft.com&sid=0bf8d58f&spx=%2F#Main%20VPN-qw9rh9i4'; print(convert_uri_reality_json('127.0.0.1', 10809, 10808, uri))"
```

You can replace the function and URI with any supported type and value.

## Output
- The generated JSON config file will be saved in the `configs/` directory (created if it doesn't exist).
- The file will be pretty-printed and ready for use with V2Ray.

## Troubleshooting
- If you get an error about the URI format, double-check that your URI is valid and complete.
- All query parameters are automatically URL-decoded (e.g., `%2F` becomes `/`).
- If you need to support more protocols, follow the pattern in the script to add new conversion functions.

## Extending
- You can add more conversion functions for other protocols by following the structure of the provided examples.


---

## How to Check if Your Proxy Setup Works

You can use the following shell script to verify if your SOCKS5 proxy (generated by this script and running on `127.0.0.1:10808`) is working for both IPv4 and IPv6:

```bash
echo "[‚úàÔ∏è  No proxy IPv4]"; curl -4 -s http://ifconfig.me; echo; \
echo "[üß¶ SOCKS5 IPv4]"; curl -4 --socks5-hostname 127.0.0.1:10808 -s http://ifconfig.me; echo; \
echo "[üß¶ SOCKS5 IPv6]"; curl -6 --socks5-hostname 127.0.0.1:10808 -s http://ifconfig.me; echo
```

- The first line shows your public IPv4 address with **no proxy**.
- The second line shows your IPv4 address **through the SOCKS5 proxy**.
- The third line shows your IPv6 address **through the SOCKS5 proxy** (if supported).

If the proxy is working, the SOCKS5 results should show a different IP (the one from your proxy server). 