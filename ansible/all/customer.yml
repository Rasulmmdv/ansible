---
# Customer Infrastructure Inventory
# This file contains customer servers (moved from inventory.yml)
all:
  children:
    customer:
      hosts:
        infra-01: # gitlab server
          ansible_host: 5.188.158.83
          ansible_port: 2222
          ansible_user: root
          ansible_become: true
          ansible_become_method: sudo
          iptables_docker_public_tcp_ports:
            - 22 #gitlab-ce for git commands
            - 80 # gitlab-ce for web interface
            - 443 # gitlab-ce for web interface
          # PostgreSQL exporter monitoring configuration
          prometheus_pgexporter_hosts:
            - "prod-01"      # Production database server
          prometheus_pgexporter_port: "9187"
          # Override default labels for PostgreSQL exporters
          prometheus_pgexporter_labels:
            job: "postgres_exporter"
            service: "postgresql"
            environment: "production"
          wireguard_address: 10.0.0.5/24
        prod-01: # prod server
          ansible_host: 188.124.37.101
          ansible_user: root
          ansible_become: true
          ansible_become_method: sudo
          iptables_custom_ports:
            - { port: 5432, proto: tcp } # postgres
            - { port: 80, proto: tcp }
            - { port: 443, proto: tcp }
            - { port: 8061, proto: tcp }
          iptables_docker_public_tcp_ports:
            - 8061
            - 80
            - 443
          pgexporter_postgres_host: "localhost"
          pgexporter_postgres_port: 5432
          pgexporter_postgres_user: "monitoring"
          pgexporter_postgres_password: "XPgwTpfJJmwoSXe"
          pgexporter_postgres_db: "postgres"
          wireguard_address: 10.0.0.6/24
          restic_postgresql_backup_enabled: true
        prod-02: # prod server
          ansible_host: 80.249.131.232
          ansible_user: root
          ansible_become: true
          ansible_become_method: sudo
          wireguard_address: 10.0.0.7/24
          restic_postgresql_backup_enabled: true
        test-01: # test server Fields
          ansible_host: 82.202.197.209
          ansible_user: root
          ansible_become: true
          ansible_become_method: sudo
          wireguard_address: 10.0.0.3/24
        vpn-01: # vpn server Hetzner
          ansible_host: 159.69.207.188
          ansible_user: root
          ansible_become: true
          ansible_become_method: sudo
          wireguard_address: 10.0.0.1/24
          iptables_custom_ports:
            - { port: 40152, proto: tcp } # xray
            - { port: 38837, proto: tcp } # xray ui
        jitsi-01: # jitsi server
          ansible_host: 85.193.92.221
          ansible_user: root
          ansible_become: true
          ansible_become_method: sudo
          wireguard_address: 10.0.0.8/24
          iptables_custom_ports:
            - { port: 80, proto: tcp }
            - { port: 443, proto: tcp }
            - { port: 4443, proto: tcp } # Jitsi JVB TCP fallback
            - { port: 10000, proto: udp } # Jitsi JVB media
          # Jitsi Meet configuration
          jitsi_domain: "meet-kimdevs.ru"
          jitsi_enable_letsencrypt: true
          jitsi_letsencrypt_domain: "meet-kimdevs.ru"
          jitsi_letsencrypt_email: "admin@kimdevs.ru"
          jitsi_compose_dir: "/opt/jitsi"



